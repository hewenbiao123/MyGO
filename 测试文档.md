## 一、黑盒测试

### （一）测试方法：等价类划分法

#### 1. 消息输入等价类划分

| 分类     | 输入条件                                 | 有效等价类                                                   | 无效等价类                                                   |
| -------- | ---------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 文字消息 | 输入合法的文字字符，长度在系统允许范围内 | 输入 1 - 500 个常见汉字、英文字母、数字和常用标点符号组成的消息，如“你好，今天过得怎么样？” | 输入超过 500 个字符的消息；输入包含系统禁止的特殊字符（如 SQL 注入字符）的消息；输入为空 |
| 图片消息 | 上传系统支持的图片格式和大小范围内的图片 | 上传 JPEG、PNG 格式，大小不超过 10MB 的图片                  | 上传非 JPEG、PNG 格式的图片；上传大小超过 10MB 的图片；上传损坏的图片文件 |
| 语音消息 | 录制系统允许时长和格式的语音             | 录制时长在 1 - 60 秒，格式为 MP3、WAV 的语音消息             | 录制时长小于 1 秒或大于 60 秒的语音消息；上传非 MP3、WAV 格式的语音文件 |

#### 2. 测试用例设计

| 用例编号 | 输入数据                      | 预期结果                                   | 覆盖等价类         |
| -------- | ----------------------------- | ------------------------------------------ | ------------------ |
| UC01     | 输入 100 个汉字组成的文字消息 | 消息成功发送，接收方正常显示消息内容       | 文字消息有效等价类 |
| UC02     | 输入 501 个字符的文字消息     | 系统提示消息长度超过限制，消息无法发送     | 文字消息无效等价类 |
| UC03     | 上传一张 5MB 的 JPEG 图片     | 图片成功发送，接收方正常显示图片           | 图片消息有效等价类 |
| UC04     | 上传一张 15MB 的 PNG 图片     | 系统提示图片大小超过限制，图片无法发送     | 图片消息无效等价类 |
| UC05     | 录制一段 30 秒的 MP3 语音消息 | 语音消息成功发送，接收方正常播放语音       | 语音消息有效等价类 |
| UC06     | 录制一段 70 秒的 WAV 语音消息 | 系统提示语音时长超过限制，语音消息无法发送 | 语音消息无效等价类 |

## 二、白盒测试

### （一）测试方法：语句覆盖

#### 1. 示例代码【MyGO项目的python后端】

```python
def send_message(sender, receiver, message, message_type):
    if message_type == 'text':
        if len(message) <= 500:
            # 模拟消息发送成功
            print(f'{sender} 向 {receiver} 发送了一条文字消息：{message}')
            return True
        else:
            print('文字消息长度超过限制，无法发送')
            return False
    elif message_type == 'image':
        # 假设图片大小通过某种方式获取
        image_size = get_image_size(message)
        if image_size <= 10 * 1024 * 1024:
            print(f'{sender} 向 {receiver} 发送了一张图片')
            return True
        else:
            print('图片大小超过限制，无法发送')
            return False
    elif message_type == 'voice':
        # 假设语音时长通过某种方式获取
        voice_duration = get_voice_duration(message)
        if 1 <= voice_duration <= 60:
            print(f'{sender} 向 {receiver} 发送了一段语音消息')
            return True
        else:
            print('语音时长不符合要求，无法发送')
            return False
    else:
        print('不支持的消息类型')
        return False
```

#### 2. 测试用例设计

| 用例编号 | 输入数据                                                     | 预期结果                                                 | 覆盖语句                     |
| -------- | ------------------------------------------------------------ | -------------------------------------------------------- | ---------------------------- |
| UC07     | sender='user1', receiver='user2', message='你好', message_type='text' | 打印“user1 向 user2 发送了一条文字消息：你好”，返回 True | 文字消息发送成功相关语句     |
| UC08     | sender='user1', receiver='user2', message='a' * 501, message_type='text' | 打印“文字消息长度超过限制，无法发送”，返回 False         | 文字消息长度超过限制相关语句 |
| UC09     | sender='user1', receiver='user2', message='image.jpg', message_type='image'（假设图片大小为 5MB） | 打印“user1 向 user2 发送了一张图片”，返回 True           | 图片消息发送成功相关语句     |
| UC10     | sender='user1', receiver='user2', message='large_image.jpg', message_type='image'（假设图片大小为 15MB） | 打印“图片大小超过限制，无法发送”，返回 False             | 图片大小超过限制相关语句     |
| UC11     | sender='user1', receiver='user2', message='voice.mp3', message_type='voice'（假设语音时长为 30 秒） | 打印“user1 向 user2 发送了一段语音消息”，返回 True       | 语音消息发送成功相关语句     |
| UC12     | sender='user1', receiver='user2', message='long_voice.mp3', message_type='voice'（假设语音时长为 70 秒） | 打印“语音时长不符合要求，无法发送”，返回 False           | 语音时长不符合要求相关语句   |
| UC13     | sender='user1', receiver='user2', message='unknown', message_type='video' | 打印“不支持的消息类型”，返回 False                       | 不支持的消息类型相关语句     |